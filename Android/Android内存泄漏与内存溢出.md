# Android内存泄漏总结
## 内存泄漏定义
- 简言之就是，该回收的对象由于被另外的实例使用而导致不能被GC回收，从而导致内存泄漏。

## Android常见的内存泄漏
### 1. 静态变量引起的内存泄漏
	单例导致的内存泄漏：单例持有Activity的Context导致的内存泄漏
### 2. 非静态内部类、匿名内部类
	由于非静态/匿名内部类会隐式持有外部类的引用，当静态/匿名内部类的生命周期与外部类的不一致时，即会发生内存泄漏
	1) Handler导致的内存泄漏
	2) Thread导致的内存泄漏
### 3. 资源未关闭导致的内存泄漏
	BroadCastReceiver、ContentObserver、Cursor、Stream等资源的使用，应该在Activity销毁时及时关闭或注销，
	否则这些资源将不会被回收，导致内存泄漏

## 如何定位内存泄漏
- 使用MAT(Memory Analysis Tools)工具
- 使用LeakCanary，可直接定位到泄漏对象，并给出调用链

## 内存泄漏的解决方法
   - 对于单例引起的内存泄漏，使用application context代替Activity Context

   - 对于非静态内部类、匿名内部类引起的内存泄漏，解决方法为：
    1. 使用静态内部类代替非静态/匿名内部类
    2. 在内部类中使用弱引用来引用外部对象

   - 对资源未关闭导致的内存泄漏，资源使用完毕后要及时关闭


-----
# Android内存溢出
## 内存溢出定义
* 程序在申请内存时，没有足够的内存空间供其使用，从而抛出OutOfMemoryError

## 内存溢出产生原因
 1. 加载数据量过于庞大，如加载大图片，一次从数据库取出大量数据
 2. 内存泄漏累积导致的内存溢出
 3. 不良代码导致内存溢出，如死循环或递归调用过深产生大量重复对象实体

## 解决方法
 1. 将图片进行压缩，数据库尽量采用分页查询
 2. 解决内存泄漏的问题
 3. 优化代码，检查是否在循环中产生大量重复对象
 